<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Sakescope Widget - ç°¡å˜åŸ‹ã‚è¾¼ã¿ã‚µãƒ³ãƒ—ãƒ«</title>
  <style>
    body {
      font-family: "Hiragino Sans", "Noto Sans JP", sans-serif;
      background: #f5f5f5;
      padding: 20px;
      margin: 0;
    }
    .container {
      max-width: 800px;
      margin: 0 auto;
      background: white;
      padding: 40px;
      border-radius: 8px;
      box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    h1 {
      color: #333;
      border-bottom: 3px solid #667eea;
      padding-bottom: 10px;
    }
    .info-box {
      background: #f0f7ff;
      border-left: 4px solid #667eea;
      padding: 15px;
      margin: 20px 0;
      border-radius: 4px;
    }
    .code-block {
      background: #282c34;
      color: #abb2bf;
      padding: 20px;
      border-radius: 8px;
      overflow-x: auto;
      margin: 20px 0;
      font-family: 'Courier New', monospace;
      font-size: 14px;
    }
    .event-log {
      background: #f9f9f9;
      border: 1px solid #ddd;
      padding: 15px;
      margin: 20px 0;
      border-radius: 4px;
      max-height: 300px;
      overflow-y: auto;
    }
    .event-item {
      padding: 8px;
      border-bottom: 1px solid #eee;
      font-size: 13px;
      font-family: monospace;
    }
    .event-item:last-child {
      border-bottom: none;
    }
    .btn {
      background: #667eea;
      color: white;
      border: none;
      padding: 12px 24px;
      border-radius: 6px;
      cursor: pointer;
      font-size: 16px;
      margin: 5px;
      transition: background 0.2s;
    }
    .btn:hover {
      background: #5568d3;
    }
  </style>
</head>
<body>
  <div class="container">
    <h1>ğŸ¤ Sakescope Voice Widget - ç°¡å˜åŸ‹ã‚è¾¼ã¿ã‚µãƒ³ãƒ—ãƒ«</h1>

    <div class="info-box">
      <strong>âœ¨ ã“ã®ãƒšãƒ¼ã‚¸ã¯ã€ãŸã£ãŸ1è¡Œã®ã‚³ãƒ¼ãƒ‰ã§Sakescopeã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚’åŸ‹ã‚è¾¼ã‚“ã§ã„ã¾ã™ï¼</strong>
      <br>å³ä¸‹ã®ãƒã‚¤ã‚¯ãƒœã‚¿ãƒ³ã‚’ã‚¯ãƒªãƒƒã‚¯ã—ã¦ã€éŸ³å£°ã§æ—¥æœ¬é…’ã‚’æ¢ã—ã¦ã¿ã¦ãã ã•ã„ã€‚
    </div>

    <h2>ğŸ“ åŸ‹ã‚è¾¼ã¿æ–¹æ³•</h2>
    <p>ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ã‚’ã€HTMLã®<code>&lt;/body&gt;</code>ã‚¿ã‚°ã®ç›´å‰ã«è¿½åŠ ã™ã‚‹ã ã‘ã§ã™ï¼š</p>

    <div class="code-block">
&lt;script src="http://localhost:3000/embed-widget.js"
        data-sakescope-host="http://localhost:3000"&gt;&lt;/script&gt;
    </div>

    <h2>ğŸ›ï¸ ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã‚ªãƒ—ã‚·ãƒ§ãƒ³</h2>
    <p>ä»¥ä¸‹ã®å±æ€§ã‚’ä½¿ã£ã¦ã€ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã®è¡¨ç¤ºã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã¾ã™ï¼š</p>
    <ul>
      <li><code>data-position</code>: ãƒœã‚¿ãƒ³ã®ä½ç½® (bottom-right, bottom-left)</li>
      <li><code>data-theme</code>: ãƒœã‚¿ãƒ³ã®ãƒ†ãƒ¼ãƒ (gradient, solid)</li>
    </ul>

    <div class="code-block">
&lt;script src="http://localhost:3000/embed-widget.js"
        data-sakescope-host="http://localhost:3000"
        data-position="bottom-left"
        data-theme="solid"&gt;&lt;/script&gt;
    </div>

    <h2>ğŸ”§ JavaScript API</h2>
    <p>JavaScriptã‹ã‚‰ä»¥ä¸‹ã®APIã‚’ä½¿ç”¨ã§ãã¾ã™ï¼š</p>

    <button class="btn" onclick="window.Sakescope.open()">ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚’é–‹ã</button>
    <button class="btn" onclick="window.Sakescope.close()">ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚’é–‰ã˜ã‚‹</button>
    <button class="btn" onclick="window.Sakescope.toggle()">ãƒˆã‚°ãƒ«</button>

    <div class="code-block">
// ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚’é–‹ã
window.Sakescope.open();

// ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‚’é–‰ã˜ã‚‹
window.Sakescope.close();

// ãƒˆã‚°ãƒ«
window.Sakescope.toggle();

// çŠ¶æ…‹ã‚’ç¢ºèª
console.log(window.Sakescope.isOpen());
    </div>

    <h2>ğŸ“¡ ã‚¤ãƒ™ãƒ³ãƒˆãƒªã‚¹ãƒ‹ãƒ³ã‚°</h2>
    <p>ã‚¦ã‚£ã‚¸ã‚§ãƒƒãƒˆã‹ã‚‰ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’å—ã‘å–ã‚‹ã“ã¨ãŒã§ãã¾ã™ï¼š</p>

    <div class="code-block">
// æ—¥æœ¬é…’ãŒãƒ¬ã‚³ãƒ¡ãƒ³ãƒ‰ã•ã‚ŒãŸæ™‚
window.addEventListener('sakescope:sakeRecommended', (e) => {
  console.log('ãŠã™ã™ã‚ã•ã‚ŒãŸæ—¥æœ¬é…’:', e.detail.sake);
});

// ã‚·ãƒ§ãƒƒãƒ—ãƒªãƒ³ã‚¯ãŒã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸæ™‚
window.addEventListener('sakescope:shopClick', (e) => {
  console.log('ã‚¯ãƒªãƒƒã‚¯ã•ã‚ŒãŸ:', e.detail.sake, e.detail.shop);
  // ã“ã“ã§ã‚«ãƒ¼ãƒˆã«è¿½åŠ ã™ã‚‹å‡¦ç†ãªã©
});
    </div>

    <h2>ğŸ“‹ ã‚¤ãƒ™ãƒ³ãƒˆãƒ­ã‚° (ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ )</h2>
    <div class="event-log" id="event-log">
      <div class="event-item">ã‚¤ãƒ™ãƒ³ãƒˆå¾…æ©Ÿä¸­...</div>
    </div>
  </div>

  <!-- Sakescope Widget -->
  <script src="http://localhost:3000/embed-widget.js"
          data-sakescope-host="http://localhost:3000"></script>

  <script>
    // Event logging
    const eventLog = document.getElementById('event-log');

    function logEvent(eventName, data) {
      const timestamp = new Date().toLocaleTimeString('ja-JP');
      const item = document.createElement('div');
      item.className = 'event-item';
      item.innerHTML = `<strong>[${timestamp}]</strong> ${eventName}: ${JSON.stringify(data, null, 2)}`;
      eventLog.insertBefore(item, eventLog.firstChild);

      // Keep only last 10 events
      while (eventLog.children.length > 10) {
        eventLog.removeChild(eventLog.lastChild);
      }
    }

    // Listen to all Sakescope events
    window.addEventListener('sakescope:sakeRecommended', (e) => {
      logEvent('sakescope:sakeRecommended', {
        name: e.detail.sake?.name,
        brewery: e.detail.sake?.brewery
      });
    });

    window.addEventListener('sakescope:shopClick', (e) => {
      logEvent('sakescope:shopClick', {
        sake: e.detail.sake?.name,
        shop: e.detail.shop?.retailer,
        price: e.detail.shop?.price
      });
    });

    window.addEventListener('sakescope:connectionChange', (e) => {
      logEvent('sakescope:connectionChange', {
        connected: e.detail.connected
      });
    });

    console.log('Sakescope API:', window.Sakescope);
  </script>
</body>
</html>
